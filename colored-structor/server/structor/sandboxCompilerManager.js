"use strict";function _interopRequireDefault(o){return o&&o.__esModule?o:{default:o}}function compileSandbox(){if(void 0===sandboxCompiler)try{sandboxWebpackConfig=require(_structorCommons.config.webpackConfigFilePath()),sandboxWebpackConfig=(0,_lodash.cloneDeep)(sandboxWebpackConfig);var o=_path2.default.join(_structorCommons.config.sandboxDirPath(),"index.js"),e=_structorCommons.config.sandboxDirPath(),n="bundle.js";sandboxWebpackConfig.entry=[o],sandboxWebpackConfig.output={path:e,filename:n},sandboxWebpackConfig.resolve=sandboxWebpackConfig.resolve||{},sandboxWebpackConfig.resolve.modules=[_structorCommons.config.SANDBOX_DIR,"node_modules"],sandboxWebpackConfig.stats="errors-only",sandboxCompiler=(0,_webpack2.default)(sandboxWebpackConfig)}catch(o){throw Error("Webpack config was not found. "+o)}return new Promise(function(o,e){sandboxCompiler.run(function(n,r){var s=r.toJson({assets:!1,assetsSort:"field",cached:!1,children:!1,chunks:!1,chunkModules:!1,chunkOrigins:!1,chunksSort:"field",colors:!1,errors:!0,errorDetails:!1,hash:!1,modules:!0,modulesSort:"field",publicPath:!1,reasons:!1,source:!1,timings:!1,version:!1,warnings:!1});n?(console.error(n),e(n.message?n.message:n.toString())):s.errors.length>0?e(s.errors.join("\n\n")):o()})})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.compileSandbox=compileSandbox;var _path=require("path"),_path2=_interopRequireDefault(_path),_lodash=require("lodash"),_webpack=require("webpack"),_webpack2=_interopRequireDefault(_webpack),_structorCommons=require("structor-commons"),sandboxCompiler=void 0,sandboxWebpackConfig=void 0;